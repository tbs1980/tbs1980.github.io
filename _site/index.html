<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Sreekumar Thaithara Balan's Blog</title>
<meta name="description" content="Describe this nonsense.">
<meta name="keywords" content="Jekyll, theme, themes, responsive, blog, modern">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://tbs1980.github.io/images/abstract-1.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="Describe this nonsense.">
<meta name="twitter:creator" content="@sreekumar_balan">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="http://tbs1980.github.io/index.html">
<meta property="og:site_name" content="Sreekumar Thaithara Balan's Blog">





<link rel="canonical" href="http://tbs1980.github.io/">
<link href="http://tbs1980.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Sreekumar Thaithara Balan's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://tbs1980.github.io/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://tbs1980.github.io/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://tbs1980.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://tbs1980.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://tbs1980.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://tbs1980.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://tbs1980.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://tbs1980.github.io/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://tbs1980.github.io/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://tbs1980.github.io/images/avatarMunch.png" alt="Sreekumar Thaithara Balan photo" class="author-photo">
					<h4>Sreekumar Thaithara Balan</h4>
					<p>An astronomer who is interested in the application of novel technologies in science and in science for creating novel technology.</p>
				</li>
				<li><a href="http://tbs1980.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:sbalan@star.ucl.ac.uk"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/sreekumar_balan"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				
				<li>
					<a href="http://linkedin.com/in/stbalan"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/tbs1980"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://tbs1980.github.io/posts/">All Posts</a></li>
				<li><a href="http://tbs1980.github.io/tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	        
	    
	    <li><a href="http://tbs1980.github.io/publications/" >Publications</a></li>
	  
	    
	        
	    
	    <li><a href="http://tbs1980.github.io/teaching/" >Teaching</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="http://www.dargadgetz.com/ios-7-abstract-wallpaper-pack-for-iphone-5-and-ipod-touch-retina/">dargadgetz</a></div><!-- /.image-credit -->
  
    <div class="entry-image">
      <img src="http://tbs1980.github.io/images/abstract-1.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Sreekumar Thaithara Balan's Blog</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-08-30T00:00:00+01:00"><a href="http://tbs1980.github.io/code-coverage-with-gcov/">August 30, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://tbs1980.github.io/about/" title="About Sreekumar Thaithara Balan">Sreekumar Thaithara Balan</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~3 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://tbs1980.github.io/code-coverage-with-gcov/" rel="bookmark" title="Analysing code coverage using gcov" itemprop="url">Analysing code coverage using gcov</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Code coverage gives us an idea about what parts of the code is covered by the unit tests.</p>

<h2 id="gcov"><code>gcov</code></h2>

<p>There are several open source tools available for analysing coverage. In this post, however, I will be using <code>gcov</code>.</p>

<p>Let us consider a simple example of a calculator program. My calculator class is shown below</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">scalarType</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">calculator</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">static</span> <span class="n">scalarType</span> <span class="n">add</span><span class="p">(</span><span class="n">scalarType</span> <span class="k">const</span> <span class="n">a</span> <span class="p">,</span> <span class="n">scalarType</span> <span class="k">const</span> <span class="n">b</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">static</span> <span class="n">scalarType</span> <span class="n">subtract</span><span class="p">(</span><span class="n">scalarType</span> <span class="k">const</span> <span class="n">a</span> <span class="p">,</span> <span class="n">scalarType</span> <span class="k">const</span> <span class="n">b</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">static</span> <span class="n">scalarType</span> <span class="n">multiply</span><span class="p">(</span><span class="n">scalarType</span> <span class="k">const</span> <span class="n">a</span> <span class="p">,</span> <span class="n">scalarType</span> <span class="k">const</span> <span class="n">b</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">static</span> <span class="n">scalarType</span> <span class="n">divide</span><span class="p">(</span><span class="n">scalarType</span> <span class="k">const</span> <span class="n">a</span> <span class="p">,</span> <span class="n">scalarType</span> <span class="k">const</span> <span class="n">b</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">/</span><span class="n">b</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">static</span> <span class="n">scalarType</span> <span class="n">abs</span><span class="p">(</span><span class="n">scalarType</span> <span class="k">const</span> <span class="n">a</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="o">&lt;</span><span class="n">scalarType</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="o">-</span><span class="n">a</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span></code></pre></div>

<p>There are several public functions that emulates the functionality of a calculator. Ideally, one would like to write a unit test corresponding to each of these functions so that the code is robust. The code coverage tools help you understand how much of your code is covered by the test programs. Now let us write a test program for the <code>add</code> function as shown below</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &lt;calculator.hpp&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">calculator</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;::</span><span class="n">add</span><span class="p">(</span><span class="kt">double</span><span class="p">(</span><span class="mf">1.</span><span class="p">),</span><span class="kt">double</span><span class="p">(</span><span class="mf">2.</span><span class="p">))</span> <span class="o">!=</span>  <span class="kt">double</span><span class="p">(</span><span class="mf">1.</span><span class="p">)</span><span class="o">+</span><span class="kt">double</span><span class="p">(</span><span class="mf">2.</span><span class="p">)</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>If this is the only test program you have, then the code coverage tools will tell you that the your code is not completely covered. Now let us consider unit tests for another function <code>abs</code>.</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">if</span><span class="p">(</span> <span class="n">calculator</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;::</span><span class="n">abs</span><span class="p">(</span><span class="kt">double</span><span class="p">(</span><span class="o">-</span><span class="mf">1.</span><span class="p">))</span> <span class="o">!=</span> <span class="kt">double</span><span class="p">(</span><span class="mf">1.</span><span class="p">)</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>Imagine that this is the only test function for the <code>abs</code> function. We then know that the test will not go beyond the <code>if</code> clause.  This is where code coverage tools can be helpful. Let us see what the <a href="https://codecov.io/github/tbs1980/CodCov/Calculator/calculator.hpp?ref=7dd5011fa287addc11ca6f3f302372bdcc136b6a">codecov.io</a> tells us about the testing. Below is a screenshot of the coverage report.</p>

<p><img src="/images/sreen_shot_code_cov_eg.png" alt="calculator code coverage" /></p>

<p>As we can see the tests missed the <code>return a</code> statement at the bottom <code>abs</code> function. Therefore, ideally, we require another test function like</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="k">if</span><span class="p">(</span> <span class="n">calculator</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;::</span><span class="n">abs</span><span class="p">(</span><span class="kt">double</span><span class="p">(</span><span class="mf">1.</span><span class="p">))</span> <span class="o">!=</span> <span class="kt">double</span><span class="p">(</span><span class="mf">1.</span><span class="p">)</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>If both test functions are present we can be sure that the <code>abs</code> function is reliable.</p>

<h2 id="setting-up-a-codecov-report-using-travisci">Setting up a <code>codecov</code> report using TravisCI</h2>

<p>If your code is under a continuous integration platform, we can easily integrate the code to the a coverage platform like <a href="https://codecov.io/">codecov</a>. All you have to do is add a few lines in the <code>.travis.yml</code> file. Below is an example</p>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">script</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">make testCalculator</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">./Calculator/testCalculator</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">gcov Calculator/testCalculator --object-directory=Calculator/CMakeFiles/testCalculator.dir/testCalculator.cpp.gcno</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ls -la</span>

<span class="l-Scalar-Plain">after_success</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">bash &lt;(curl -s https://codecov.io/bash)</span></code></pre></div>

<p>The next steps are</p>

<ol>
  <li>make an account in <a href="https://codecov.io/">codecov</a> and</li>
  <li>add your repository to the dashboard. </li>
</ol>

<p>If you are linking your <a href="https://github.com/">github</a>, then adding a public repository is straightforward. My example repository can be found <a href="https://github.com/tbs1980/CodCov">here</a>.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-07-28T00:00:00+01:00"><a href="http://tbs1980.github.io/intel-xeon-phi/">July 28, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://tbs1980.github.io/about/" title="About Sreekumar Thaithara Balan">Sreekumar Thaithara Balan</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~6 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://tbs1980.github.io/intel-xeon-phi/" rel="bookmark" title="Intel Xeon Phi for High Performance Computing" itemprop="url">Intel Xeon Phi for High Performance Computing</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Last week I bought an Intel Xeon Phi off EBay. My plan is to create a desktop supercomputer! This is an extremely challenging but exciting project.</p>

<h2 id="the-excitement">The excitement</h2>

<p>One of my areas of my research is spherical harmonics (used in power spectrum estimation of cosmological data) and two of the codes that are available for fast Spherical Harmonic Transform (SHT) is parallelized by OpenMP. I believe Xeon Phi is ideal for this computation. People in Caltech did a performance analysis a few years ago on Xeon Phi and their <a href="http://web.ipac.caltech.edu/staff/fmasci/home/miscscience/MIC_benchmarking_2013.pdf">paper</a> gives a good insight. They do caution about what can be achieved.</p>

<blockquote>
  <p>While most heritage software will run on the Xeon Phi with little effort, there’s no guarantee it will run optimally to fully exploit its architecture, even if the segments that carry out intensive numerical computations have been highly parallelized.</p>
</blockquote>

<p>I found a sample code in their paper which shows how “easy” it is to offload the highly parallelizable parts of the code to Xeon Phi. Take a look below</p>

<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#ifndef MIC_DEV</span>
<span class="cp">#define MIC_DEV 0</span>
<span class="cp">#endif</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>
<span class="cp">#include &lt;omp.h&gt;</span>
<span class="cp">#include &lt;mkl.h&gt; </span><span class="cm">/* needed for the dsecnd() timing function. */</span><span class="cp"></span>
<span class="cp">#include &lt;math.h&gt;</span>
<span class="cm">/* Program test1.c: multiply two matrices using explicit looping of elements. */</span>
<span class="cm">/*---------------------------------------------------------------------*/</span>
<span class="cm">/* Simple &quot;naive&quot; method to multiply two square matrices A and B</span>
<span class="cm"> to generate matrix C. */</span>
<span class="kt">void</span> <span class="nf">myMult</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">,</span>
    <span class="kt">float</span> <span class="p">(</span><span class="o">*</span> <span class="kr">restrict</span> <span class="n">A</span><span class="p">)[</span><span class="n">size</span><span class="p">],</span>
    <span class="kt">float</span> <span class="p">(</span><span class="o">*</span> <span class="kr">restrict</span> <span class="n">B</span><span class="p">)[</span><span class="n">size</span><span class="p">],</span>
    <span class="kt">float</span> <span class="p">(</span><span class="o">*</span> <span class="kr">restrict</span> <span class="n">C</span><span class="p">)[</span><span class="n">size</span><span class="p">])</span>
<span class="p">{</span>
    <span class="cp">#pragma offload target(mic:MIC_DEV) in(A:length(size*size)) \</span>
<span class="cp">    in( B:length(size*size)) \</span>
<span class="cp">    out(C:length(size*size))</span>
    <span class="p">{</span>
        <span class="cm">/* Initialize the C matrix with zeroes. */</span>
        <span class="cp">#pragma omp parallel for default(none) shared(C,size)</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span>
                <span class="n">C</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.f</span><span class="p">;</span>

        <span class="cm">/* Compute matrix multiplication. */</span>
        <span class="cp">#pragma omp parallel for default(none) shared(A,B,C,size)</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">k</span><span class="p">)</span>
                <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span>
                    <span class="n">C</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">+=</span> <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">*</span> <span class="n">B</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cm">/*---------------------------------------------------------------------*/</span>
<span class="cm">/* Read input parameters; set-up dummy input data; multiply matrices using</span>
<span class="cm"> the myMult() function above; average repeated runs. */</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">argc</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="s">&quot;Use: %s size nThreads nIter</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">nt</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">size</span><span class="o">=</span><span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="kt">int</span> <span class="n">nThreads</span><span class="o">=</span><span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="kt">int</span> <span class="n">nIter</span><span class="o">=</span><span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>

    <span class="n">omp_set_num_threads</span><span class="p">(</span><span class="n">nThreads</span><span class="p">);</span>
    <span class="cm">/* when compiled in &quot;mic-offload&quot; mode, this memory gets allocated on host,</span>
<span class="cm">    when compiled in &quot;mic-native&quot; mode, it gets allocated on mic. */</span>
    <span class="kt">float</span> <span class="p">(</span><span class="o">*</span><span class="kr">restrict</span> <span class="n">A</span><span class="p">)[</span><span class="n">size</span><span class="p">]</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="o">*</span><span class="n">size</span><span class="o">*</span><span class="n">size</span><span class="p">);</span>
    <span class="kt">float</span> <span class="p">(</span><span class="o">*</span><span class="kr">restrict</span> <span class="n">B</span><span class="p">)[</span><span class="n">size</span><span class="p">]</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="o">*</span><span class="n">size</span><span class="o">*</span><span class="n">size</span><span class="p">);</span>
    <span class="kt">float</span> <span class="p">(</span><span class="o">*</span><span class="kr">restrict</span> <span class="n">C</span><span class="p">)[</span><span class="n">size</span><span class="p">]</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="o">*</span><span class="n">size</span><span class="o">*</span><span class="n">size</span><span class="p">);</span>
    <span class="cm">/* this first pragma is just to get the actual #threads used</span>
<span class="cm">    (sanity check). */</span>
    <span class="cp">#pragma omp parallel</span>
    <span class="p">{</span>
        <span class="n">nt</span> <span class="o">=</span> <span class="n">omp_get_num_threads</span><span class="p">();</span>

        <span class="cm">/* Fill the A and B arrays with dummy test data. */</span>
        <span class="cp">#pragma omp parallel for default(none) shared(A,B,size) private(i,j)</span>
        <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span><span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">i</span> <span class="o">+</span> <span class="n">j</span><span class="p">;</span>
                <span class="n">B</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">i</span> <span class="o">-</span> <span class="n">j</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="cm">/* warm up run to overcome setup overhead in benchmark runs below. */</span>
    <span class="n">myMult</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">aveTime</span><span class="p">,</span><span class="n">minTime</span><span class="o">=</span><span class="mf">1e6</span><span class="p">,</span><span class="n">maxTime</span><span class="o">=</span><span class="mf">0.</span><span class="p">;</span>
    <span class="cm">/* run the matrix multiplication function nIter times and compute</span>
<span class="cm">    average runtime. */</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nIter</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">double</span> <span class="n">startTime</span> <span class="o">=</span> <span class="n">dsecnd</span><span class="p">();</span>
        <span class="n">myMult</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">);</span>
        <span class="kt">double</span> <span class="n">endTime</span> <span class="o">=</span> <span class="n">dsecnd</span><span class="p">();</span>
        <span class="kt">double</span> <span class="n">runtime</span> <span class="o">=</span> <span class="n">endTime</span><span class="o">-</span><span class="n">startTime</span><span class="p">;</span>
        <span class="n">maxTime</span><span class="o">=</span><span class="p">(</span><span class="n">maxTime</span> <span class="o">&gt;</span> <span class="n">runtime</span><span class="p">)</span><span class="o">?</span><span class="nl">maxTime</span><span class="p">:</span><span class="n">runtime</span><span class="p">;</span>
        <span class="n">minTime</span><span class="o">=</span><span class="p">(</span><span class="n">minTime</span> <span class="o">&lt;</span> <span class="n">runtime</span><span class="p">)</span><span class="o">?</span><span class="nl">minTime</span><span class="p">:</span><span class="n">runtime</span><span class="p">;</span>
        <span class="n">aveTime</span> <span class="o">+=</span> <span class="n">runtime</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">aveTime</span> <span class="o">/=</span> <span class="n">nIter</span><span class="p">;</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s nThreads %d matrix %d maxRT %g minRT %g aveRT %g GFlop/s %g</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
    <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">nt</span><span class="p">,</span><span class="n">size</span><span class="p">,</span><span class="n">maxTime</span><span class="p">,</span><span class="n">minTime</span><span class="p">,</span><span class="n">aveTime</span><span class="p">,</span> <span class="mf">2e-9</span><span class="o">*</span><span class="n">size</span><span class="o">*</span><span class="n">size</span><span class="o">*</span><span class="n">size</span><span class="o">/</span><span class="n">aveTime</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">A</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">B</span><span class="p">);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">C</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>I found an <a href="https://www.hpc.kaust.edu.sa/training/2013/Phi/materials/09-HatemLtaief.pdf">interesting talk</a> by Hatem Ltaief about performance of BLAS (<a href="http://icl.cs.utk.edu/magma/">MAGA library</a>) on Xeon Phi. Here is a slide from his talk.</p>

<p><img src="/images/09-HatemLtaief.png" alt="MAGMA" /></p>

<h2 id="specs-mother-board-air-supply-">Specs, Mother-board, Air-supply, …</h2>
<p>There is a lot of info about the mother-board support and heat dissipation on forums. For example see this <a href="https://www.pugetsystems.com/labs/articles/Will-your-motherboard-work-with-Intel-Xeon-Phi-490/">thread</a>. I have a 5110P which is passively cooled. The specs of which from the Intel page is below</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left"> </th>
      <th style="text-align: center"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">L2 Cache</td>
      <td style="text-align: center">30 MB</td>
    </tr>
    <tr>
      <td style="text-align: left"># of Cores</td>
      <td style="text-align: center">60</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left">Processor Base Frequency</td>
      <td style="text-align: center">1.053 GHz</td>
    </tr>
    <tr>
      <td style="text-align: left">Max Memory Size</td>
      <td style="text-align: center">8 GB</td>
    </tr>
    <tr>
      <td style="text-align: left">Max Memory Bandwidth</td>
      <td style="text-align: center">320 GB/s</td>
    </tr>
  </tbody>
</table>

<p><img src="/images/XeonPhi.jpg" alt="XeonPhi" /></p>

<p>The card also requires sufficient air supply to make things work!. Puget-Systems has a case in which they have 3-D printed an air duct for Xeon Phi! From the thread, I decided to go for the specification suggested by Zibi Holka. Here are the specs</p>

<ol>
  <li>ASUS GRYPHON (TUF) Z97 mATX motherboard! BIOS:2205 -standard BIOS</li>
  <li>Intel Core i7 i7-4790K CPU (Quad Core 4GHz, Socket H3 LGA-1150)</li>
  <li>Corsair Platinum 16GB 2x8GB Memory Kit (CMD32GX3M4A2133C9)</li>
  <li>Xeon PHI 31s1p</li>
  <li>Fedora 21</li>
  <li>Kernel (std. fedora): 3.18.7</li>
  <li>MPSS: 3.4.2 MPSS-Modules recompiled from <a href="https://github.com/xdsopl/mpss-modules">https://github.com/xdsopl/mpss-modules</a></li>
</ol>

<p>I may not get the exact CPU/Memory config and I have a 5110P instead of 31S1P. So far I have the first 4 in the list. I will update this blog as I make progress :)</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-06-24T00:00:00+01:00"><a href="http://tbs1980.github.io/fpga-based-hpc/">June 24, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://tbs1980.github.io/about/" title="About Sreekumar Thaithara Balan">Sreekumar Thaithara Balan</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://tbs1980.github.io/fpga-based-hpc/" rel="bookmark" title="FPGA for scientific computing" itemprop="url">FPGA for scientific computing</a></h1>
    
  </header>
  <div class="entry-content">
    <p>FPGA or Field-Programmable Gate Array is the latest addition to crazy world of HPC. It is an  an integrated circuit designed to be configured by a customer or a designer after manufacturing. The FPGA configuration is generally specified using a hardware description language (HDL). However, several vendors are now offering OpenCL based API. The idea that you have custom hardware for a specific algorithm, for example, Fast Fourier Transform or Markov Chain Monte Carlo is breathtaking.</p>

<h2 id="mcmc">MCMC</h2>
<p>I am seeing more and more papers on this approach recently. For example, take <a href="http://cas.ee.ic.ac.uk/people/ccb98/papers/MingasARC11.pdf">this</a> paper by Mingas &amp; Bouganis. They report 1000X speedup for a Parallel Tempering Algorithm. They have implemented the code in <a href="https://en.wikipedia.org/wiki/VHDL">VHDL</a> on a Virtex-6 FPGA. Here is a plot from the paper</p>

<p><img src="/images/fpga_speedup_mcmc.png" alt="speedup" /></p>

<p>The code however is not public yet.</p>

<h2 id="blas">BLAS</h2>
<p>Another interesting <a href="http://research.microsoft.com/pubs/130834/isvlsi_final.pdf">paper</a> was on a BLAS implementation on FPGA by Kestur, Davis and Williams. Their conclusion is extremely interesting: “Results show that FPGAs offer comparable performance as well as 2.7 to 293 times better energy efficiency for the test cases that we implemented on all three platforms.”. Here is a plot from their paper</p>

<p><img src="/images/fpga_avg_time_energy.png" alt="time-energy" /></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-05-03T00:00:00+01:00"><a href="http://tbs1980.github.io/stochastic-gradient-hmc/">May 03, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://tbs1980.github.io/about/" title="About Sreekumar Thaithara Balan">Sreekumar Thaithara Balan</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://tbs1980.github.io/stochastic-gradient-hmc/" rel="bookmark" title="Stochastic gradient Hamiltonian Monte Carlo" itemprop="url">Stochastic gradient Hamiltonian Monte Carlo</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Recently I came across this paper on Hamiltonian Monte Carlo with stochastic gradients. Since it is very relevant to my research, I thought I will have a look. Here are my thoughts and comments on the paper.</p>

<p><a href="http://arxiv.org/abs/1402.4102"><img src="http://img.shields.io/badge/arXiv-1402.4102-orange.svg?style=flat" alt="ArXiv" /></a></p>

<p>Hamiltonian Monte Carlo(HMC) is one of my research areas. One of the most annoying thing about the HMC is that gradients of the probability distribution is required for the sampling. A MATLAB code is available in [GitHub](https://github.com/tqchen/ML-SGHMC. Below is a plot from this paper which compare the true input distribution with the one recovered by HMC.</p>

<p><img src="/images/func4_SGHMC.png" alt="SGHMC" /></p>

<p>The MATLAB code is simple to understand. See the gist below</p>

<div class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="k">function</span><span class="w"> </span>[ newx ] <span class="p">=</span><span class="w"> </span><span class="nf">sghmc</span><span class="p">(</span> U, gradU, m, dt, nstep, x, C, V <span class="p">)</span><span class="w"></span>
<span class="c">%% SGHMC using gradU, for nstep, starting at position x</span>

<span class="n">p</span> <span class="p">=</span> <span class="nb">randn</span><span class="p">(</span> <span class="nb">size</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">)</span> <span class="o">*</span> <span class="nb">sqrt</span><span class="p">(</span> <span class="n">m</span> <span class="p">);</span>
<span class="n">B</span> <span class="p">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">V</span> <span class="o">*</span> <span class="n">dt</span><span class="p">;</span>
<span class="n">D</span> <span class="p">=</span> <span class="nb">sqrt</span><span class="p">(</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">C</span><span class="o">-</span><span class="n">B</span><span class="p">)</span> <span class="o">*</span> <span class="n">dt</span> <span class="p">);</span>

<span class="k">for</span> <span class="nb">i</span> <span class="p">=</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">nstep</span>
    <span class="n">p</span> <span class="p">=</span> <span class="n">p</span> <span class="o">-</span> <span class="n">gradU</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span> <span class="o">*</span> <span class="n">dt</span>  <span class="o">-</span> <span class="n">p</span> <span class="o">*</span> <span class="n">C</span> <span class="o">*</span> <span class="n">dt</span>  <span class="o">+</span> <span class="nb">randn</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">D</span><span class="p">;</span>
    <span class="n">x</span> <span class="p">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">p</span><span class="o">./</span><span class="n">m</span> <span class="o">*</span> <span class="n">dt</span><span class="p">;</span>
<span class="k">end</span>
<span class="n">newx</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span>
<span class="k">end</span></code></pre></div>

<p>What I would like to see is its application to large-scale problems. My concern is that the choice of parameters, for example the friction B,</p>

<script type="math/tex; mode=display">\mathbf{B}(\theta) = \frac{1}{2} \epsilon \mathbf{V}(\theta)</script>

<p>can have huge effect on the performance of the sampler.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-04-19T00:00:00+01:00"><a href="http://tbs1980.github.io/openacc-compilers/">April 19, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://tbs1980.github.io/about/" title="About Sreekumar Thaithara Balan">Sreekumar Thaithara Balan</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~3 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://tbs1980.github.io/openacc-compilers/" rel="bookmark" title="OpenACC based scientific computing" itemprop="url">OpenACC based scientific computing</a></h1>
    
  </header>
  <div class="entry-content">
    <p>OpenACC is getting a lot of attention recently and especially in the application to scientific computing. The main reason I believe is that these are compiler directives and hence reasonably fast to learn as long as you have pieces of code that are parallelisable.  I wanted to see what compilers are publicly available for OpenACC.</p>

<h2 id="compiler-support">Compiler support</h2>

<p>The following compilers support the OpenACC directives (as of today)</p>

<ol>
  <li><a href="https://www.pgroup.com/resources/accel.htm">PGI</a></li>
  <li><a href="http://exxactcorp.com/index.php/software/prod_list/5">CAPS</a></li>
  <li><a href="http://web.cs.uh.edu/~openuh/">OpenUH</a></li>
  <li><a href="https://accull.wordpress.com/">accULL</a></li>
  <li><a href="http://ft.ornl.gov/research/openarc/">OpenARC</a></li>
</ol>

<p>OpenUH and accULL are open source and are available for download now. On a linux platform you can get these to build and check sone cool features of OpenACC.</p>

<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="cm">/*</span>
<span class="cm"> * Simple test</span>
<span class="cm"> *  allocates two vectors, fills the vectors, does axpy a couple of times,</span>
<span class="cm"> *  compares the results for correctness.</span>
<span class="cm"> *  This is the same as version s1.cpp with &#39;int&#39; instead of &#39;double&#39;</span>
<span class="cm"> */</span>

<span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;cstdio&gt;</span>
<span class="cp">#include &lt;openacc.h&gt;</span>

<span class="cm">/* Depending on the GCC version you have installed, this cause warnings */</span>
<span class="k">extern</span> <span class="s">&quot;C&quot;</span> <span class="kt">int</span> <span class="n">atoi</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span><span class="p">);</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">axpy</span><span class="p">(</span> <span class="kt">int</span><span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span> <span class="p">){</span>
    <span class="cp">#pragma acc parallel loop present(x[0:n],y[0:n])</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span>
        <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">a</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span>
<span class="nf">test</span><span class="p">(</span> <span class="kt">int</span><span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span><span class="o">*</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span> <span class="p">){</span>
    <span class="cp">#pragma acc data copy(a[0:n]) copyin(b[0:n])</span>
    <span class="p">{</span>
    <span class="n">axpy</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">n</span> <span class="p">);</span>

    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="cp">#pragma acc update device(b[0:n])</span>

    <span class="n">axpy</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">n</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span> <span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[]</span> <span class="p">){</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">argc</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="n">n</span> <span class="o">=</span> <span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

    <span class="kt">int</span><span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">b</span><span class="p">;</span>

    <span class="n">a</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>

    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">;</span>

    <span class="n">test</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">n</span> <span class="p">);</span>

    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span> <span class="n">sum</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">exp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span> <span class="p">)</span> <span class="n">exp</span> <span class="o">+=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Checksum is &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">sum</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span> <span class="n">exp</span> <span class="o">!=</span> <span class="n">sum</span> <span class="p">)</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Difference is &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">exp</span> <span class="o">-</span> <span class="n">sum</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">else</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;PASSED&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<p>The most difficult bit is to get a compiler installed. The rest is very exciting!</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    Previous
  
  <ul class="inline-list">
    <li>
      
        <span class="current-page">1</span>
      
    </li>
    
      <li>
        
          <a href="http://tbs1980.github.io/page2">2</a>
        
      </li>
    
      <li>
        
          <a href="http://tbs1980.github.io/page3">3</a>
        
      </li>
    
      <li>
        
          <a href="http://tbs1980.github.io/page4">4</a>
        
      </li>
    
  </ul>
  
    <a href="http://tbs1980.github.io/page2" class="btn">Next</a>
  
</div><!-- /.pagination -->
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 Sreekumar Thaithara Balan. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://tbs1980.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://tbs1980.github.io/assets/js/scripts.min.js"></script>

<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




          

</body>
</html>