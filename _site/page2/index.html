<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Sreekumar Thaithara Balan's Blog</title>
<meta name="description" content="Describe this nonsense.">
<meta name="keywords" content="Jekyll, theme, themes, responsive, blog, modern">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://tbs1980.github.io/images/abstract-1.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="Describe this nonsense.">
<meta name="twitter:creator" content="@sreekumar_balan">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="http://tbs1980.github.io/page2/index.html">
<meta property="og:site_name" content="Sreekumar Thaithara Balan's Blog">





<link rel="canonical" href="http://tbs1980.github.io/page2/">
<link href="http://tbs1980.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Sreekumar Thaithara Balan's Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://tbs1980.github.io/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://tbs1980.github.io/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://tbs1980.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://tbs1980.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://tbs1980.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://tbs1980.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://tbs1980.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://tbs1980.github.io/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://tbs1980.github.io/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://tbs1980.github.io/images/avatarMunch.png" alt="Sreekumar Thaithara Balan photo" class="author-photo">
					<h4>Sreekumar Thaithara Balan</h4>
					<p>An astronomer who is interested in the application of novel technologies in science and in science for creating novel technology.</p>
				</li>
				<li><a href="http://tbs1980.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:sbalan@star.ucl.ac.uk"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/sreekumar_balan"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				
				<li>
					<a href="http://linkedin.com/in/stbalan"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="http://github.com/tbs1980"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://tbs1980.github.io/posts/">All Posts</a></li>
				<li><a href="http://tbs1980.github.io/tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	        
	    
	    <li><a href="http://tbs1980.github.io/publications/" >Publications</a></li>
	  
	    
	        
	    
	    <li><a href="http://tbs1980.github.io/teaching/" >Teaching</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="http://www.dargadgetz.com/ios-7-abstract-wallpaper-pack-for-iphone-5-and-ipod-touch-retina/">dargadgetz</a></div><!-- /.image-credit -->
  
    <div class="entry-image">
      <img src="http://tbs1980.github.io/images/abstract-1.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Sreekumar Thaithara Balan's Blog</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-03-28T00:00:00+00:00"><a href="http://tbs1980.github.io/travis-ci-integration/">March 28, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://tbs1980.github.io/about/" title="About Sreekumar Thaithara Balan">Sreekumar Thaithara Balan</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://tbs1980.github.io/travis-ci-integration/" rel="bookmark" title="Integrating github projects with Travis-CI" itemprop="url">Integrating github projects with Travis-CI</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Continuous integration is extremely useful when developing a project with multiple collaborators. Travis-CI platform offers an excellent service for github based projects. I wanted to create and example project and see what are the steps required for integrating github project with Travis-CI.</p>

<h2 id="overview">Overview</h2>

<p>Here is an excellent summary of Continuous Integration from <a href="https://github.com/mbonaci/mbo-storm/wiki/Integrate-Travis-CI-with-your-GitHub-repo">Marko Bonaci</a></p>

<blockquote>
  <p>Continuous Integration is the umbrella for various techniques and practices that every self-respecting software project should employ.The main goal is to eliminate the long and tedious integration process, the work that you normally have to do between version’s final development stage and its deployment in production. So you routinely perform (or rather, CI performs for you) the same sequence of steps, thus making the whole process polished and reliable.</p>
</blockquote>

<p>The main features of Travis-CI agree</p>

<ol>
  <li>Automatically detects when a commit has been made and pushed to a GitHub repository that is using Travis CI, and each time this happens,</li>
  <li>It will automatically try to build the project and run tests.</li>
  <li>Project management integration</li>
  <li>Project Dashboard -&gt; everything is out in the open (generally without any read access restrictions, making it available to all interested parties)</li>
  <li>Supports a wide range of languages,</li>
</ol>

<h2 id="integrating-a-github-project">Integrating a GitHub project</h2>

<p>If the project is GitHub the integration is very easy. Here are the basic steps I followed</p>

<ol>
  <li>Sign in to <a href="https://travis-ci.org/">Travis-CI</a> using a GitHub id</li>
  <li>In the upper right corner click on your name (or choose <code>Accounts</code>) to open your Travis-ci profile. Then you will be able to see the GitHub repositories. The sync toggle-slider will enable</li>
  <li>Now in the GitHub local repo, create a <code>.travis.yml</code> file. You can see an example <a href="https://github.com/tbs1980/TravisCI/blob/master/.travis.yml">here</a>. More documentation can be found <a href="http://docs.travis-ci.com/user/getting-started/">here</a>. If you have more then one language in the code you may have to be a bit creative and do something like <a href="https://github.com/tbs1980/Ellipsis/blob/master/.travis.yml">this</a></li>
  <li>As soon as you push this to GitHub, you will see that the build is happening in your Travis-CI Dashboard.</li>
</ol>

<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">language</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">cpp</span>

<span class="l-Scalar-Plain">compiler</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">gcc</span>

<span class="l-Scalar-Plain">before_install</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">echo $LANG</span>

<span class="l-Scalar-Plain">before_script</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">cmake CMakeLists.txt</span>

<span class="l-Scalar-Plain">script</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">$CXX --version</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">make</span></code></pre></div>

<p>You can even embed the build status in the README.md of your project. See the documentation <a href="http://docs.travis-ci.com/user/status-images/">here</a></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
      <div class="entry-image-index">
        <a href="http://tbs1980.github.io/rust-language/" title="Rust programming language"><img src="http://tbs1980.github.io/images/abstract-7.jpg" alt="Rust programming language"></a>
      </div><!-- /.entry-image -->
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-02-05T00:00:00+00:00"><a href="http://tbs1980.github.io/rust-language/">February 05, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://tbs1980.github.io/about/" title="About Sreekumar Thaithara Balan">Sreekumar Thaithara Balan</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://tbs1980.github.io/rust-language/" rel="bookmark" title="Rust programming language" itemprop="url">Rust programming language</a></h1>
    
  </header>
  <div class="entry-content">
    <p>I hear a lot of good things about <a href="https://www.rust-lang.org/">Rust</a> programming language. It currently sits in the top 20 in popularity. I wanted to checkout the language features and I find it rather refreshing. However, as with any new language, Rust has some issues as well.</p>

<h2 id="what-is-it-all-about">What is it all about?</h2>

<p>There is a lot of talk about how Rust is superior to c/c++. Here is an example from <a href="http://kukuruku.co/hub/rust/comparing-rust-and-cpp">Dzmitry Malyshau</a> that shows “A lost pointer to the Local Variable”</p>

<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="o">*</span><span class="nf">bar</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">p</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span><span class="o">*</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">p1</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="kt">int</span> <span class="o">*</span><span class="n">p2</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d, %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">p1</span><span class="p">,</span> <span class="o">*</span><span class="n">p2</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>This will print</p>

<pre><code>2, 2
</code></pre>

<p>How ever in Rust an equivalent code will result in a compilation error.</p>

<div class="highlight"><pre><code class="language-rust" data-lang="rust"><span class="k">fn</span> <span class="n">bar</span><span class="o">&lt;</span><span class="nl">&#39;a</span><span class="o">&gt;</span><span class="p">(</span><span class="n">p</span><span class="o">:</span> <span class="o">&amp;</span><span class="n">&#39;a</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">&amp;</span><span class="n">&#39;a</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">p</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="n">foo</span><span class="p">(</span><span class="n">n</span><span class="o">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">&amp;</span><span class="kt">int</span> <span class="p">{</span>
    <span class="n">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="n">n</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="kd">let</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="nb">println</span><span class="o">!</span><span class="p">(</span><span class="s">&quot;{}, {}&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">p1</span><span class="p">,</span> <span class="o">*</span><span class="n">p2</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>While compiling you will see</p>

<pre><code>demo:5:10: 5:11 error: `n` does not live long enough
demo:5 bar(&amp;n)
^
demo:4:24: 6:2 note: reference must be valid for the anonymous lifetime #1 defined on the block at 4:23…
demo:4 fn foo(n: int) -&gt; &amp;int {
demo:5 bar(&amp;n)
demo:6 }
demo:4:24: 6:2 note: ...but borrowed value is only valid for the block at 4:23
demo:4 fn foo(n: int) -&gt; &amp;int {
demo:5 bar(&amp;n)
demo:6 }
</code></pre>

<p>I agree that the pointer is lost there, but do we really write a piece of code like that in C in real life? In my opinion unlikely.</p>

<p>In any case I have enjoyed programming in Rust. :) <a href="https://github.com/tbs1980/Rust">Here</a> is my collection of examples.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-01-20T00:00:00+00:00"><a href="http://tbs1980.github.io/nearest-neighbor-algorithms/">January 20, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="http://tbs1980.github.io/about/" title="About Sreekumar Thaithara Balan">Sreekumar Thaithara Balan</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://tbs1980.github.io/nearest-neighbor-algorithms/" rel="bookmark" title="Finding nearest neighbors in large dimensions" itemprop="url">Finding nearest neighbors in large dimensions</a></h1>
    
  </header>
  <div class="entry-content">
    <p>In my previous post I wrote about my experience with writing a KDE code. One of the biggest challenges was to optimally select the points in space which are “relevant” to KDE given a random point. Of course one can select all points to the “best” estimate given the set of samples. However, this may be computationally expensive when the dimensionality of the problem is high and the number of samples are very large. In such situations on may need to choose the best points for KDE given a kernel. This can be achieved by choosing set of nearest neighbors for computing the KDE. Again I was exploring the github landscape for nearest neighbor algorithms.</p>

<h1 id="nearest-neighbors-in-github">Nearest Neighbors in github</h1>

<p>There are plenty of codes in github that implements the nearest neighbors. Here is a small list</p>

<ol>
  <li><a href="https://github.com/mariusmuja/flann">https://github.com/mariusmuja/flann</a></li>
  <li><a href="https://github.com/spotify/annoy">https://github.com/spotify/annoy</a></li>
  <li><a href="https://github.com/aaalgo/kgraph">https://github.com/aaalgo/kgraph</a></li>
</ol>

<p>I found <code>flann</code> extremely light and easy to use. The only dependency in Eigen. An example from <code>flann</code> showing the API is here</p>

<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include &lt;flann/flann.hpp&gt;</span>
<span class="cp">#include &lt;flann/io/hdf5.h&gt;</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="n">using</span> <span class="n">namespace</span> <span class="n">flann</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">nn</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

    <span class="n">Matrix</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">dataset</span><span class="p">;</span>
    <span class="n">Matrix</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">query</span><span class="p">;</span>
    <span class="n">load_from_file</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="s">&quot;dataset.hdf5&quot;</span><span class="p">,</span><span class="s">&quot;dataset&quot;</span><span class="p">);</span>
    <span class="n">load_from_file</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="s">&quot;dataset.hdf5&quot;</span><span class="p">,</span><span class="s">&quot;query&quot;</span><span class="p">);</span>

    <span class="n">Matrix</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">indices</span><span class="p">(</span><span class="n">new</span> <span class="kt">int</span><span class="p">[</span><span class="n">query</span><span class="p">.</span><span class="n">rows</span><span class="o">*</span><span class="n">nn</span><span class="p">],</span> <span class="n">query</span><span class="p">.</span><span class="n">rows</span><span class="p">,</span> <span class="n">nn</span><span class="p">);</span>
    <span class="n">Matrix</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">dists</span><span class="p">(</span><span class="n">new</span> <span class="kt">float</span><span class="p">[</span><span class="n">query</span><span class="p">.</span><span class="n">rows</span><span class="o">*</span><span class="n">nn</span><span class="p">],</span> <span class="n">query</span><span class="p">.</span><span class="n">rows</span><span class="p">,</span> <span class="n">nn</span><span class="p">);</span>

    <span class="c1">// construct an randomized kd-tree index using 4 kd-trees</span>
    <span class="n">Index</span><span class="o">&lt;</span><span class="n">L2</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">index</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">flann</span><span class="o">::</span><span class="n">KDTreeIndexParams</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>
    <span class="n">index</span><span class="p">.</span><span class="n">buildIndex</span><span class="p">();</span>

    <span class="c1">// do a knn search, using 128 checks</span>
    <span class="n">index</span><span class="p">.</span><span class="n">knnSearch</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">dists</span><span class="p">,</span> <span class="n">nn</span><span class="p">,</span> <span class="n">flann</span><span class="o">::</span><span class="n">SearchParams</span><span class="p">(</span><span class="mi">128</span><span class="p">));</span>

    <span class="n">flann</span><span class="o">::</span><span class="n">save_to_file</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span><span class="s">&quot;result.hdf5&quot;</span><span class="p">,</span><span class="s">&quot;result&quot;</span><span class="p">);</span>

    <span class="n">delete</span><span class="p">[]</span> <span class="n">dataset</span><span class="p">.</span><span class="n">ptr</span><span class="p">();</span>
    <span class="n">delete</span><span class="p">[]</span> <span class="n">query</span><span class="p">.</span><span class="n">ptr</span><span class="p">();</span>
    <span class="n">delete</span><span class="p">[]</span> <span class="n">indices</span><span class="p">.</span><span class="n">ptr</span><span class="p">();</span>
    <span class="n">delete</span><span class="p">[]</span> <span class="n">dists</span><span class="p">.</span><span class="n">ptr</span><span class="p">();</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-12-22T00:00:00+00:00"><a href="http://tbs1980.github.io/kernel-density-estimation/">December 22, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="http://tbs1980.github.io/about/" title="About Sreekumar Thaithara Balan">Sreekumar Thaithara Balan</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~4 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://tbs1980.github.io/kernel-density-estimation/" rel="bookmark" title="Kernel density estimation" itemprop="url">Kernel density estimation</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Markov Chain Monte Carlo is an excellent tool for estimating posterior densities. The output of these algorithms are samples from the posterior probability distribution of parameters. One can easily obtain summary statistics from these samples, for example mean and standard deviation. However if the posterior distribution is used as an input to another Bayesian problem, we need a method of estimating the probability given a random sample from the posterior space. This is where the KDE is extremely useful.</p>

<h1 id="overview">Overview</h1>
<p>In Python, R and MATLAB there are plenty of off-the-shelf libraries available for posteriors with reasonably large dimensions. However, it is hard to find a stable library in c, c++ and fortran. I was looking at github and found the following open source codes.</p>

<ol>
  <li><a href="https://github.com/timnugent/kernel-density">https://github.com/timnugent/kernel-density</a></li>
  <li><a href="https://github.com/KaiyuanWu/fastKernelDensityEstimation">https://github.com/KaiyuanWu/fastKernelDensityEstimation</a></li>
  <li><a href="https://github.com/jmarshallnz/adsmooth.git">https://github.com/jmarshallnz/adsmooth.git</a></li>
  <li><a href="https://github.com/vmorariu/figtree.git">https://github.com/vmorariu/figtree.git</a></li>
</ol>

<p>Every one of these have interesting aspects but none of the matched the requirements of my problem. My requirements where</p>

<ol>
  <li>a header only library</li>
  <li>can handle large dimensions</li>
  <li>fast</li>
  <li>efficient memory management</li>
</ol>

<p>Since none of the codes satisfied all 4 requirements, I started my own version of it.  You can find the code in <a href="https://github.com/tbs1980/KernelDensityEstimation">GitHub</a>. My idea is that the kernels can be specified as a template parameter. Then we can create an efficient library with many different kernels. A demo code is shown below</p>

<div class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include &lt;KernelDensityEstimation&gt;</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">realScalarType</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">GaussAllNbs</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">realScalarType</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="k">const</span> <span class="o">&amp;</span> <span class="n">dataIn</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">typedef</span> <span class="n">kde</span><span class="o">::</span><span class="n">Gaussian</span><span class="o">&lt;</span><span class="n">realScalarType</span><span class="o">&gt;</span> <span class="n">kernelType</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="n">kde</span><span class="o">::</span><span class="n">DiagonalBandwidthMatrix</span><span class="o">&lt;</span><span class="n">realScalarType</span><span class="o">&gt;</span> <span class="n">bandwidthType</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="n">kde</span><span class="o">::</span><span class="n">AllNeighbours</span><span class="o">&lt;</span><span class="n">realScalarType</span><span class="o">&gt;</span> <span class="n">neighboursType</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="n">kde</span><span class="o">::</span><span class="n">KernelDensityEstimator</span><span class="o">&lt;</span><span class="n">kernelType</span><span class="p">,</span><span class="n">bandwidthType</span><span class="p">,</span><span class="n">neighboursType</span><span class="o">&gt;</span> <span class="n">kdeType</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="k">typename</span> <span class="n">kdeType</span><span class="o">::</span><span class="n">realVectorType</span> <span class="n">realVectorType</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="k">typename</span> <span class="n">kdeType</span><span class="o">::</span><span class="n">realMatrixType</span> <span class="n">realMatrixType</span><span class="p">;</span>
    <span class="k">typedef</span> <span class="k">typename</span> <span class="n">kdeType</span><span class="o">::</span><span class="n">indexType</span> <span class="n">indexType</span><span class="p">;</span>

    <span class="n">assert</span><span class="p">(</span><span class="n">dataIn</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()</span> <span class="o">==</span> <span class="mi">3</span><span class="p">);</span><span class="c1">//will work for a 2-d pdf only!</span>

    <span class="n">realMatrixType</span> <span class="nf">samples</span><span class="p">(</span><span class="n">dataIn</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="n">dataIn</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>

    <span class="k">for</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">dataIn</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">/</span><span class="mi">4</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">dataIn</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">samples</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="o">=</span> <span class="n">dataIn</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// build kde</span>
    <span class="n">kdeType</span> <span class="n">kde</span><span class="p">(</span><span class="n">samples</span><span class="p">);</span>

    <span class="c1">// find the bounds of the 2-d pdf</span>
    <span class="k">const</span> <span class="n">realScalarType</span> <span class="n">xMin</span> <span class="o">=</span> <span class="n">samples</span><span class="p">.</span><span class="n">col</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="n">minCoeff</span><span class="p">();</span>
    <span class="k">const</span> <span class="n">realScalarType</span> <span class="n">xMax</span> <span class="o">=</span> <span class="n">samples</span><span class="p">.</span><span class="n">col</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="n">maxCoeff</span><span class="p">();</span>
    <span class="k">const</span> <span class="n">realScalarType</span> <span class="n">yMin</span> <span class="o">=</span> <span class="n">samples</span><span class="p">.</span><span class="n">col</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">minCoeff</span><span class="p">();</span>
    <span class="k">const</span> <span class="n">realScalarType</span> <span class="n">yMax</span> <span class="o">=</span> <span class="n">samples</span><span class="p">.</span><span class="n">col</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">maxCoeff</span><span class="p">();</span>

    <span class="c1">// create a plottable data</span>
    <span class="k">const</span> <span class="n">indexType</span> <span class="n">numSteps</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">realScalarType</span> <span class="n">dx</span> <span class="o">=</span> <span class="p">(</span><span class="n">xMax</span> <span class="o">-</span> <span class="n">xMin</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">realScalarType</span><span class="p">)</span> <span class="n">numSteps</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">realScalarType</span> <span class="n">dy</span> <span class="o">=</span> <span class="p">(</span><span class="n">yMax</span> <span class="o">-</span> <span class="n">yMin</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">realScalarType</span><span class="p">)</span> <span class="n">numSteps</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">ofstream</span> <span class="n">outFile</span><span class="p">;</span>
    <span class="n">outFile</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;plot-bi-variate-Gauss.dat&quot;</span><span class="p">,</span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">trunc</span><span class="p">);</span>
    <span class="n">outFile</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">scientific</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="n">indexType</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">numSteps</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">realScalarType</span> <span class="n">xi</span> <span class="o">=</span> <span class="n">xMin</span> <span class="o">+</span> <span class="n">i</span><span class="o">*</span><span class="n">dx</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span><span class="n">indexType</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">numSteps</span><span class="p">;</span><span class="o">++</span><span class="n">j</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">realScalarType</span> <span class="n">yi</span> <span class="o">=</span> <span class="n">yMin</span> <span class="o">+</span> <span class="n">j</span><span class="o">*</span><span class="n">dy</span><span class="p">;</span>
            <span class="n">realVectorType</span> <span class="nf">samp</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
            <span class="n">samp</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="n">xi</span><span class="p">;</span>
            <span class="n">samp</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">yi</span><span class="p">;</span>
            <span class="c1">//outFile&lt;&lt;std::setprecision(10)&lt;&lt;xi&lt;&lt;&quot;,&quot;&lt;&lt;yi&lt;&lt;&quot;,&quot;&lt;&lt;kde.compute(samp)&lt;&lt;std::endl;</span>
            <span class="n">outFile</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">setprecision</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">xi</span><span class="o">&lt;&lt;</span><span class="s">&quot;,&quot;</span><span class="o">&lt;&lt;</span><span class="n">yi</span><span class="o">&lt;&lt;</span><span class="s">&quot;,&quot;</span><span class="o">&lt;&lt;</span><span class="n">kde</span><span class="p">.</span><span class="n">computePDF</span><span class="p">(</span><span class="n">samp</span><span class="p">)</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">outFile</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">outFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>

<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">typedef</span> <span class="kt">double</span> <span class="n">realScalarType</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">fileName</span><span class="p">(</span><span class="s">&quot;../data/bi-variate-Gauss.dat&quot;</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">realScalarType</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dataIn</span><span class="p">;</span>
    <span class="n">utils</span><span class="o">::</span><span class="n">readData</span><span class="o">&lt;</span><span class="n">realScalarType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="sc">&#39;,&#39;</span><span class="p">,</span><span class="n">dataIn</span><span class="p">);</span>

    <span class="n">GaussAllNbs</span><span class="o">&lt;</span><span class="n">realScalarType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">dataIn</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<p>Here is an example of a 2-D density I recreated with my code</p>

<p><img src="/images/demoBiVariateGauss.png" alt="KDE" /></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-11-30T00:00:00+00:00"><a href="http://tbs1980.github.io/opencl-cuda-linear-algebra/">November 30, 2014</a></time></span><span class="author vcard"><span class="fn"><a href="http://tbs1980.github.io/about/" title="About Sreekumar Thaithara Balan">Sreekumar Thaithara Balan</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="http://tbs1980.github.io/opencl-cuda-linear-algebra/" rel="bookmark" title="GPU based linear algebra libraries" itemprop="url">GPU based linear algebra libraries</a></h1>
    
  </header>
  <div class="entry-content">
    <p>The linear algebra war is heating up! There are a handful of excellent linear algebra libraries with GPU backend and it exciting to see the different APIs and their capabilities.  </p>

<h2 id="linear-algebra-libraries">Linear algebra libraries</h2>

<p>First of all there are several excellent libraries for doing linear algebra in GPUs</p>

<ol>
  <li><a href="https://developer.nvidia.com/cuBLAS">cuBlas</a></li>
  <li><a href="https://github.com/clMathLibraries/clBLAS">clBlas</a></li>
  <li><a href="http://icl.cs.utk.edu/magma/overview/index.html">Magma</a></li>
  <li><a href="http://viennacl.sourceforge.net/index.html">Vienna-CL</a></li>
</ol>

<p>I haven’t seen a performance comparison of these libraries yet.</p>

<h2 id="other-vector-libraries">Other vector libraries</h2>

<p>Some other important vector libraries are below</p>

<ol>
  <li><a href="http://boostorg.github.io/compute/">BoostCompute</a></li>
  <li><a href="http://thrust.github.io/">Thrust</a></li>
  <li><a href="https://github.com/HSA-Libraries/Bolt">Hsa-Bolt</a></li>
  <li><a href="http://arrayfire.com/">ArrayFire</a></li>
</ol>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    
      <a href="http://tbs1980.github.io" class="btn">Previous</a>
    
  
  <ul class="inline-list">
    <li>
      
        <a href="http://tbs1980.github.io">1</a>
      
    </li>
    
      <li>
        
          <span class="current-page">2</span>
        
      </li>
    
      <li>
        
          <a href="http://tbs1980.github.io/page3">3</a>
        
      </li>
    
      <li>
        
          <a href="http://tbs1980.github.io/page4">4</a>
        
      </li>
    
  </ul>
  
    <a href="http://tbs1980.github.io/page3" class="btn">Next</a>
  
</div><!-- /.pagination -->
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 Sreekumar Thaithara Balan. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://tbs1980.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://tbs1980.github.io/assets/js/scripts.min.js"></script>

<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




          

</body>
</html>